# 消息

> 更新记录

<table>
    <tr>
        <th style="width:250px;">日期</th>
        <th>更新内容</th>
    </tr>
    <tr>
        <td>2018-06-04 10:53:38</td>
        <td>生成时间</td>
    </tr>
</table>

> 字段

<table>
    <tr>
        <th style="width:150px;">名称</th>
        <th style="width:60px;">类型</th>
        <th style="width:200px;">说明</th>
        <th>备注</th>
    </tr>
    <tr>
        <td>clinicId</td>
        <td>long</td>
        <td>诊所ID</td>
        <td>-</td>
    </tr>
    <tr>
        <td>clinicName</td>
        <td>string</td>
        <td>诊所名称</td>
        <td>-</td>
    </tr>
    <tr>
        <td>patientId</td>
        <td>long</td>
        <td>患者ID</td>
        <td>-</td>
    </tr>
    <tr>
        <td>patientName</td>
        <td>string</td>
        <td>患者姓名</td>
        <td>-</td>
    </tr>
    <tr>
        <td>userId</td>
        <td>long</td>
        <td>操作人ID</td>
        <td>-</td>
    </tr>
    <tr>
        <td>userName</td>
        <td>string</td>
        <td>操作人</td>
        <td>-</td>
    </tr>
    <tr>
        <td>category</td>
        <td>string</td>
        <td>消息类别</td>
        <td>-</td>
    </tr>
    <tr>
        <td>sourceId</td>
        <td>string</td>
        <td>消息来源ID</td>
        <td>-</td>
    </tr>
    <tr>
        <td>content</td>
        <td>string</td>
        <td>内容</td>
        <td>-</td>
    </tr>
    <tr>
        <td>data</td>
        <td>json</td>
        <td>json内容</td>
        <td>-</td>
    </tr>
    <tr>
        <td>remindTime</td>
        <td>date</td>
        <td>提醒日期</td>
        <td>-</td>
    </tr>
    <tr>
        <td>remark</td>
        <td>string</td>
        <td>备注</td>
        <td>-</td>
    </tr>
</table>

## 消息列表

```
GET /clinic/message/v1/message
```
> 请求参数

<table>
    <tr>
        <th style="width:150px;">属性名称</th>
        <th style="width:60px;">类型</th>
        <th style="width:60px;">必填</th>
        <th style="width:200px;">说明</th>
    </tr>
    <tr>
        <td>clinicId</td>
        <td>long</td>
        <td>是</td>
        <td>诊所ID</td>
    </tr>
    <tr>
        <td>patientId</td>
        <td>long</td>
        <td>-</td>
        <td>患者ID</td>
    </tr>
    <tr>
        <td>keyword</td>
        <td>string</td>
        <td>-</td>
        <td>搜索关键词</td>
    </tr>
    <tr>
        <td>start</td>
        <td>date</td>
        <td>-</td>
        <td>开始时间, 默认3天前</td>
    </tr>
    <tr>
        <td>end</td>
        <td>date</td>
        <td>-</td>
        <td>结束时间, 默认3天后</td>
    </tr>
</table>

## 消息数量

```
GET /clinic/message/v1/message/count-by-status
```
> 请求参数

<table>
    <tr>
        <th style="width:150px;">属性名称</th>
        <th style="width:60px;">类型</th>
        <th style="width:60px;">必填</th>
        <th style="width:200px;">说明</th>
    </tr>
    <tr>
        <td>clinicId</td>
        <td>string</td>
        <td>是</td>
        <td>门店ID</td>
    </tr>
    <tr>
        <td>patientId</td>
        <td>long</td>
        <td>是</td>
        <td>患者ID</td>
    </tr>
    <tr>
        <td>status</td>
        <td>Status</td>
        <td>-</td>
        <td>消息状态: 不传: 所有 waiting: 待处理 ok: 已处理</td>
    </tr>
    <tr>
        <td>start</td>
        <td>date</td>
        <td>-</td>
        <td>开始时间, 默认3天前</td>
    </tr>
    <tr>
        <td>end</td>
        <td>date</td>
        <td>-</td>
        <td>结束时间, 默认3天后</td>
    </tr>
</table>

## 更新消息状态

```
POST /clinic/message/v1/message/set-status
```
> 请求参数

<table>
    <tr>
        <th style="width:150px;">属性名称</th>
        <th style="width:60px;">类型</th>
        <th style="width:60px;">必填</th>
        <th style="width:200px;">说明</th>
    </tr>
    <tr>
        <td>clinicId</td>
        <td>long</td>
        <td>是</td>
        <td>门店ID</td>
    </tr>
    <tr>
        <td>id</td>
        <td>int</td>
        <td>-</td>
        <td>消息ID, 不传则处理所有消息</td>
    </tr>
    <tr>
        <td>status</td>
        <td>Status</td>
        <td>是</td>
        <td>消息状态</td>
    </tr>
</table>

## 消息数量-按日期统计

```
GET /clinic/message/v1/message/count-by-date
```

> 请求参数

<table>
    <tr>
        <th style="width:150px;">属性名称</th>
        <th style="width:60px;">类型</th>
        <th style="width:60px;">必填</th>
        <th style="width:200px;">说明</th>
    </tr>
    <tr>
        <td>clinicId</td>
        <td>string</td>
        <td>是</td>
        <td>门店ID</td>
    </tr>
    <tr>
        <td>start</td>
        <td>date</td>
        <td>-</td>
        <td>开始时间, 默认1月前</td>
    </tr>
    <tr>
        <td>end</td>
        <td>date</td>
        <td>-</td>
        <td>结束时间, 默认1月后</td>
    </tr>
</table>